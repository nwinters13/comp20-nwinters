<!DOCTYPE html>

<html>

<head>
<title>Fecesbook</title>
<script>

if(!localStorage['numKeys']){
	localStorage['numKeys'] = 0;
}

//localStorage.clear();

function getUpdates(){
	if(localStorage['numKeys'] > 0){
		var numKeys = localStorage["numKeys"];
		for(var i = 0; i < numKeys; i++){
			var newP = document.createElement("p");
			var parentElement = document.getElementById('status');
			var theFirstChild = parentElement.firstChild;
			var msg = document.getElementById('msg').value;
			newP.innerHTML = localStorage['status' + i];
			parentElement.insertBefore(newP, theFirstChild);
			document.getElementById('msg').value = "";
		}
	}
}


function createUpdates(){
var currentDate = new Date();
var newP = document.createElement("p");
var parentElement= document.getElementById('status');
var theFirstChild = parentElement.firstChild;
var msg = document.getElementById("msg").value;

newP.innerHTML = (currentDate.getMonth() + 1) + "/" + currentDate.getDate() + "/" + currentDate.getFullYear() + " " + 
                   ((currentDate.getUTCHours() + 20) % 24) + ":" + currentDate.getMinutes() + " - " + msg;

parentElement.insertBefore(newP, theFirstChild);

localStorage['status'+ localStorage['numKeys']] = newP.innerHTML;
localStorage["numKeys"]++;

document.getElementById("msg").value = "";
}
</script>


</head>

<body onload="getUpdates()">
	<h1>Fecebook</h1>
	<div id="nav">
		<ul>
			<li id="home">Home</li>
			<li id="groups">Groups</li>
			<li id="profile">Profile</li>
			<li id="contacts">Contacts</li>
			<li id="inbox">Inbox</li>
			<li id="applications">Applications</li>
		</ul>
	</div>
	<h2 id="fullname">Barney Gumble</h2>
	<h3>What are you thinking about? <input type="text" id="msg" name="msg" size="30" onchange="createUpdates()"/></h3>
	<h3>Updates</h3>
	<div id="status">
	</div>

</html>

